# 공통프로젝트

각자 공부한 내용을 바탕으로 공통주제 모바일앱 개발하기

## 주제정하기 - 22/6/8

- **주제**: 랜덤 메뉴 추천
  - 문자열 목록을 가지고 있다가 사용자가 버튼 누르면 랜덤하게 추천
  - 공개 API/데이터를 활용하여 추천
    - [지역 - Search API (naver.com)](https://developers.naver.com/docs/serviceapi/search/local/local.md)
    - [좌표제공 API | 도로명주소 개발자센터 (juso.go.kr)](https://www.juso.go.kr/addrlink/devAddrLinkRequestGuide.do?menu=coordApi)
- **1차목표**: 회사근처(논현~신논현) 랜덤한 메뉴 추천
- **2차목표**: 현재 위치 200m 안에서 랜덤한 메뉴를 추천
  - 위치정보는 어떻게 다뤄야할까
  - API/주소를 어떻게 좌표로 바꾸고, 다시 근처 맛집을 어떻게 추출해내나
  - 가게 정보를 백그라운드에서 불러온다면 어느 주기로 해야할까?
    - 화면 열 때마다
    - 백그라운드 수시
    - 리프레시 버튼을 누르면
    - 메뉴만 바꾸고 싶을 때, 음식점을 바꾸고 싶을 때

## 중간공유 - 22/6/16

- **API 비교/선택**
  - 랜덤정보
    - 서울시 일반음식점 인허가정보(4만여건) 중에서 랜덤하게 선택 [LOCALDATA - 지방행정인허가데이터개방:데이터다운로드](https://www.localdata.go.kr/devcenter/dataDown.do?menuNo=20001) 
    - 네이버 API로 '위치 + 메뉴이름' 검색하고 랜덤하게 선택
  - 세부정보
    - 네이버 API로 상세정보를 불러와 사용자에게 보여주기 [지역 - Search API (naver.com)](https://developers.naver.com/docs/serviceapi/search/local/local.md)

| 구분                      | 네이버 :white_check_mark:                                  | 구글                                                         | 행정안전부 :white_check_mark:                           |
| ------------------------- | ---------------------------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------- |
| API 명                    | 검색/지역                                                  | Map/Place Search                                             | 서울시 일반음식점 <br />인허가정보                      |
| 가격정책                  | 무료                                                       | $17/1천건<br />([과금정책 페이지]([Platform Pricing & API Costs - Google Maps Platform](https://mapsplatform.google.com/pricing/?hl=ko))) | 무료                                                    |
| 제공방식                  | REST                                                       | REST                                                         | 데이터셋/REST<br />기초자료는 다운받고, 변동분은 REST로 |
| 제공정보                  | 장소                                                       | 장소                                                         | 음식점                                                  |
| 제공정보 세부             | 업체명, <br />상세정보 링크, <br />전화정보, <br />주소 등 | 업체명,<br />전화번호,<br />주소,<br />사진,<br />평점,<br />가격대 등 | 업체명,<br />전화번호,<br />주소 등                     |
| 호출횟수                  | 일일2만5천건                                               | 제한없음                                                     | 제한없음                                                |
| 호출건당 <br />데이터개수 | 최대 5개                                                   | 제한없음                                                     | 최대 1천개<br />(4만6천여건)                            |

- 40만줄 이상되는 XML파일을 어떻게 파싱할까?
- 파싱한 결과를 어떻게 보관하고 접근할까?

## 결과공유 - 22/6/00

![](../res/RandomPlate_V1.gif)

- **1차 목표: REST로 음식점 정보를 조회하고 화면에 뿌려주기**
- scrollview 아래 taskview를 추가하고, 항목들은 동적으로 생성했다
  - constraint를 모두 설정해줘야 동적 생성이 가능하다
  - addArrangedSubview
  - removeArrangedSubview

- URLSession, URLRequest, dataTask로 REST 요청을 처리했다
  - 응답은 codable 프로토콜을 채택해 JSON 디코드용 모델을 만들어줬다
  - @escaping 클로저를 전달해 결과값을 dataTask 클로저 밖으로 빼냈다
  - DispatchQueue.main.async로 UI 업데이트를 비동기 처리했다

- segment control로 검색조건을 입력받았다
  - 현재위치 위치정보는 location manager로 확인했다
  - info.plist에 위치권한을 추가했다
  - 다른 segment를 선택할 때마다 stackview가 초기화되도록 했다


- **다음 목표**
  - 스택 뷰 아래 항목들 예쁘게 만들기 :triangular_flag_on_post:
  - 스크롤이 되게끔 하기
  - tableview로 바꿔서 만들어보기
  - 집/회사 위치정보 사용자 입력받기
  - 메뉴 카테고리 사용자 입력받기, 또는 더 다양하게
- **그 다음 목표** : 음식점 인허가 정보를 활용해서 더 랜덤하게 만들기
  - 대량의 XML 파싱 어떻게?
  - 데이터 업데이트는 어떻게?
  - 근처에 있는 음식점은 어떻게 추려내지?
  - 상세정보는 어떻게 조회하지?
